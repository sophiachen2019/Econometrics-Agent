import{s as ye,a as V,f as o,M as Me,d as m,c as S,g as n,h as C,N as z,j as e,i as se,r as t,u as G,C as ue,K as Ie,v as ie,w as he,o as Te,l as ae,z as me,m as re,A as pe,Q as ge,n as ne,p as Ce}from"../chunks/scheduler.161605a7.js";import{e as we}from"../chunks/each.65aa5674.js";import{S as He,i as Le}from"../chunks/index.acd0f037.js";import{a as oe}from"../chunks/Toaster.svelte_svelte_type_style_lang.51e71bae.js";import{f as Ee}from"../chunks/FileSaver.min.898eb36f.js";import{j as ee,W as Ve}from"../chunks/index.7deef04d.js";import{d as Se}from"../chunks/index.781620a4.js";import{d as De,g as le,c as _e}from"../chunks/index.96fd2918.js";import{g as Ne}from"../chunks/navigation.7dcef832.js";function xe(s,i,a){const f=s.slice();return f[20]=i[a],f}function ke(s){let i,a,f,g,r,v,_,u,b,j=s[20].title+"",y,D,N,H=s[20].desc+"",L,h,M,d,U,x,J,W,l,p,O='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg>',A,E,$='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"></path></svg>',Q,Z,q='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"></path></svg>',k,I,c;function R(){return s[8](s[20])}function w(){return s[9](s[20])}function X(){return s[10](s[20])}return{c(){i=o("div"),a=o("a"),f=o("div"),g=o("div"),r=o("img"),_=V(),u=o("div"),b=o("div"),y=ae(j),D=V(),N=o("div"),L=ae(H),M=V(),d=o("div"),U=o("a"),x=me("svg"),J=me("path"),l=V(),p=o("button"),p.innerHTML=O,A=V(),E=o("button"),E.innerHTML=$,Q=V(),Z=o("button"),Z.innerHTML=q,k=V(),this.h()},l(T){i=n(T,"DIV",{class:!0});var B=C(i);a=n(B,"A",{class:!0,href:!0});var F=C(a);f=n(F,"DIV",{class:!0});var P=C(f);g=n(P,"DIV",{class:!0});var Y=C(g);r=n(Y,"IMG",{src:!0,alt:!0,class:!0}),Y.forEach(m),P.forEach(m),_=S(F),u=n(F,"DIV",{class:!0});var te=C(u);b=n(te,"DIV",{class:!0});var de=C(b);y=re(de,j),de.forEach(m),D=S(te),N=n(te,"DIV",{class:!0});var ce=C(N);L=re(ce,H),ce.forEach(m),te.forEach(m),F.forEach(m),M=S(B),d=n(B,"DIV",{class:!0});var K=C(d);U=n(K,"A",{class:!0,type:!0,href:!0});var fe=C(U);x=pe(fe,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var ve=C(x);J=pe(ve,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),C(J).forEach(m),ve.forEach(m),fe.forEach(m),l=S(K),p=n(K,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),z(p)!=="svelte-pkad6t"&&(p.innerHTML=O),A=S(K),E=n(K,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),z(E)!=="svelte-1rseo2u"&&(E.innerHTML=$),Q=S(K),Z=n(K,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),z(Z)!=="svelte-1td0slu"&&(Z.innerHTML=q),K.forEach(m),k=S(B),B.forEach(m),this.h()},h(){ge(r.src,v=s[20].imageUrl??"/user.png")||e(r,"src",v),e(r,"alt","modelfile profile"),e(r,"class","rounded-full w-full h-auto object-cover"),e(g,"class","rounded-full bg-stone-700"),e(f,"class","self-center w-10"),e(b,"class","font-bold capitalize"),e(N,"class","text-sm overflow-hidden text-ellipsis line-clamp-1"),e(u,"class","flex-1 self-center"),e(a,"class","flex flex-1 space-x-4 cursor-pointer w-full"),e(a,"href",h=`/?models=${encodeURIComponent(s[20].tagName)}`),e(J,"stroke-linecap","round"),e(J,"stroke-linejoin","round"),e(J,"d","m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"),e(x,"xmlns","http://www.w3.org/2000/svg"),e(x,"fill","none"),e(x,"viewBox","0 0 24 24"),e(x,"stroke-width","1.5"),e(x,"stroke","currentColor"),e(x,"class","w-4 h-4"),e(U,"class","self-center w-fit text-sm px-2 py-2 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-xl"),e(U,"type","button"),e(U,"href",W=`/modelfiles/edit?tag=${encodeURIComponent(s[20].tagName)}`),e(p,"class","self-center w-fit text-sm px-2 py-2 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-xl"),e(p,"type","button"),e(E,"class","self-center w-fit text-sm px-2 py-2 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-xl"),e(E,"type","button"),e(Z,"class","self-center w-fit text-sm px-2 py-2 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-xl"),e(Z,"type","button"),e(d,"class","flex flex-row space-x-1 self-center"),e(i,"class","flex space-x-4 cursor-pointer w-full px-3 py-2 dark:hover:bg-white/5 hover:bg-black/5 rounded-xl")},m(T,B){se(T,i,B),t(i,a),t(a,f),t(f,g),t(g,r),t(a,_),t(a,u),t(u,b),t(b,y),t(u,D),t(u,N),t(N,L),t(i,M),t(i,d),t(d,U),t(U,x),t(x,J),t(d,l),t(d,p),t(d,A),t(d,E),t(d,Q),t(d,Z),t(i,k),I||(c=[G(p,"click",R),G(E,"click",w),G(Z,"click",X)],I=!0)},p(T,B){s=T,B&16&&!ge(r.src,v=s[20].imageUrl??"/user.png")&&e(r,"src",v),B&16&&j!==(j=s[20].title+"")&&ne(y,j),B&16&&H!==(H=s[20].desc+"")&&ne(L,H),B&16&&h!==(h=`/?models=${encodeURIComponent(s[20].tagName)}`)&&e(a,"href",h),B&16&&W!==(W=`/modelfiles/edit?tag=${encodeURIComponent(s[20].tagName)}`)&&e(U,"href",W)},d(T){T&&m(i),I=!1,ie(c)}}}function be(s){let i,a,f=s[0].length+"",g,r,v,_,u,b='<div class="self-center mr-2 font-medium">Sync All</div> <div class="self-center"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-3.5 h-3.5"><path fill-rule="evenodd" d="M13.836 2.477a.75.75 0 0 1 .75.75v3.182a.75.75 0 0 1-.75.75h-3.182a.75.75 0 0 1 0-1.5h1.37l-.84-.841a4.5 4.5 0 0 0-7.08.932.75.75 0 0 1-1.3-.75 6 6 0 0 1 9.44-1.242l.842.84V3.227a.75.75 0 0 1 .75-.75Zm-.911 7.5A.75.75 0 0 1 13.199 11a6 6 0 0 1-9.44 1.241l-.84-.84v1.371a.75.75 0 0 1-1.5 0V9.591a.75.75 0 0 1 .75-.75H5.35a.75.75 0 0 1 0 1.5H3.98l.841.841a4.5 4.5 0 0 0 7.08-.932.75.75 0 0 1 1.025-.273Z" clip-rule="evenodd"></path></svg></div>',j,y,D='<div class="self-center"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"></path></svg></div>',N,H;return{c(){i=o("div"),a=o("div"),g=ae(f),r=ae(" Local Modelfiles Detected"),v=V(),_=o("div"),u=o("button"),u.innerHTML=b,j=V(),y=o("button"),y.innerHTML=D,this.h()},l(L){i=n(L,"DIV",{class:!0});var h=C(i);a=n(h,"DIV",{class:!0});var M=C(a);g=re(M,f),r=re(M," Local Modelfiles Detected"),M.forEach(m),v=S(h),_=n(h,"DIV",{class:!0});var d=C(_);u=n(d,"BUTTON",{class:!0,"data-svelte-h":!0}),z(u)!=="svelte-7dllhm"&&(u.innerHTML=b),j=S(d),y=n(d,"BUTTON",{class:!0,"data-svelte-h":!0}),z(y)!=="svelte-176wxo6"&&(y.innerHTML=D),d.forEach(m),h.forEach(m),this.h()},h(){e(a,"class","self-center text-sm font-medium mr-4"),e(u,"class","self-center w-fit text-sm px-3 py-1 border dark:border-gray-600 rounded-xl flex"),e(y,"class","self-center w-fit text-sm p-1.5 border dark:border-gray-600 rounded-xl flex"),e(_,"class","flex space-x-1"),e(i,"class","flex")},m(L,h){se(L,i,h),t(i,a),t(a,g),t(a,r),t(i,v),t(i,_),t(_,u),t(_,j),t(_,y),N||(H=[G(u,"click",s[16]),G(y,"click",s[17])],N=!0)},p(L,h){h&1&&f!==(f=L[0].length+"")&&ne(g,f)},d(L){L&&m(i),N=!1,ie(H)}}}function Be(s){let i,a,f,g,r,v,_="My Modelfiles",u,b,j='<div class="self-center w-10"><div class="w-full h-10 flex justify-center rounded-full bg-transparent dark:bg-gray-700 border border-dashed border-gray-200"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6"><path fill-rule="evenodd" d="M12 3.75a.75.75 0 01.75.75v6.75h6.75a.75.75 0 010 1.5h-6.75v6.75a.75.75 0 01-1.5 0v-6.75H4.5a.75.75 0 010-1.5h6.75V4.5a.75.75 0 01.75-.75z" clip-rule="evenodd"></path></svg></div></div> <div class="self-center"><div class="font-bold">Create a modelfile</div> <div class="text-sm">Customize Ollama models for a specific purpose</div></div>',y,D,N,H,L,h,M,d,U,x,J='<div class="self-center mr-2 font-medium">Import Modelfiles</div> <div class="self-center"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-3.5 h-3.5"><path fill-rule="evenodd" d="M4 2a1.5 1.5 0 0 0-1.5 1.5v9A1.5 1.5 0 0 0 4 14h8a1.5 1.5 0 0 0 1.5-1.5V6.621a1.5 1.5 0 0 0-.44-1.06L9.94 2.439A1.5 1.5 0 0 0 8.878 2H4Zm4 9.5a.75.75 0 0 1-.75-.75V8.06l-.72.72a.75.75 0 0 1-1.06-1.06l2-2a.75.75 0 0 1 1.06 0l2 2a.75.75 0 1 1-1.06 1.06l-.72-.72v2.69a.75.75 0 0 1-.75.75Z" clip-rule="evenodd"></path></svg></div>',W,l,p='<div class="self-center mr-2 font-medium">Export Modelfiles</div> <div class="self-center"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-3.5 h-3.5"><path fill-rule="evenodd" d="M4 2a1.5 1.5 0 0 0-1.5 1.5v9A1.5 1.5 0 0 0 4 14h8a1.5 1.5 0 0 0 1.5-1.5V6.621a1.5 1.5 0 0 0-.44-1.06L9.94 2.439A1.5 1.5 0 0 0 8.878 2H4Zm4 3.5a.75.75 0 0 1 .75.75v2.69l.72-.72a.75.75 0 1 1 1.06 1.06l-2 2a.75.75 0 0 1-1.06 0l-2-2a.75.75 0 0 1 1.06-1.06l.72.72V6.25A.75.75 0 0 1 8 5.5Z" clip-rule="evenodd"></path></svg></div>',O,A,E,$='<div class="text-2xl font-semibold mb-3">Made by OpenWebUI Community</div> <a class="flex space-x-4 cursor-pointer w-full mb-2 px-3 py-2" href="https://openwebui.com/" target="_blank"><div class="self-center w-10"><div class="w-full h-10 flex justify-center rounded-full bg-transparent dark:bg-gray-700 border border-dashed border-gray-200"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6"><path fill-rule="evenodd" d="M12 3.75a.75.75 0 01.75.75v6.75h6.75a.75.75 0 010 1.5h-6.75v6.75a.75.75 0 01-1.5 0v-6.75H4.5a.75.75 0 010-1.5h6.75V4.5a.75.75 0 01.75-.75z" clip-rule="evenodd"></path></svg></div></div> <div class="self-center"><div class="font-bold">Discover a modelfile</div> <div class="text-sm">Discover, download, and explore model presets</div></div></a>',Q,Z;document.title=i=`
		Modelfiles | ${s[3]}
	`;let q=we(s[4]),k=[];for(let c=0;c<q.length;c+=1)k[c]=ke(xe(s,q,c));let I=s[0].length>0&&be(s);return{c(){a=V(),f=o("div"),g=o("div"),r=o("div"),v=o("div"),v.textContent=_,u=V(),b=o("a"),b.innerHTML=j,y=V(),D=o("hr"),N=V(),H=o("div");for(let c=0;c<k.length;c+=1)k[c].c();L=V(),h=o("div"),M=o("div"),d=o("input"),U=V(),x=o("button"),x.innerHTML=J,W=V(),l=o("button"),l.innerHTML=p,O=V(),I&&I.c(),A=V(),E=o("div"),E.innerHTML=$,this.h()},l(c){Me("svelte-1kq4swv",document.head).forEach(m),a=S(c),f=n(c,"DIV",{class:!0});var w=C(f);g=n(w,"DIV",{class:!0});var X=C(g);r=n(X,"DIV",{class:!0});var T=C(r);v=n(T,"DIV",{class:!0,"data-svelte-h":!0}),z(v)!=="svelte-k5f92r"&&(v.textContent=_),u=S(T),b=n(T,"A",{class:!0,href:!0,"data-svelte-h":!0}),z(b)!=="svelte-16v3joa"&&(b.innerHTML=j),y=S(T),D=n(T,"HR",{class:!0}),N=S(T),H=n(T,"DIV",{class:!0});var B=C(H);for(let Y=0;Y<k.length;Y+=1)k[Y].l(B);B.forEach(m),L=S(T),h=n(T,"DIV",{class:!0});var F=C(h);M=n(F,"DIV",{class:!0});var P=C(M);d=n(P,"INPUT",{id:!0,type:!0,accept:!0}),U=S(P),x=n(P,"BUTTON",{class:!0,"data-svelte-h":!0}),z(x)!=="svelte-k4mr3x"&&(x.innerHTML=J),W=S(P),l=n(P,"BUTTON",{class:!0,"data-svelte-h":!0}),z(l)!=="svelte-ua0j5l"&&(l.innerHTML=p),P.forEach(m),O=S(F),I&&I.l(F),F.forEach(m),A=S(T),E=n(T,"DIV",{class:!0,"data-svelte-h":!0}),z(E)!=="svelte-1byv7gk"&&(E.innerHTML=$),T.forEach(m),X.forEach(m),w.forEach(m),this.h()},h(){e(v,"class","text-2xl font-semibold mb-3"),e(b,"class","flex space-x-4 cursor-pointer w-full mb-2 px-3 py-2"),e(b,"href","/modelfiles/create"),e(D,"class","dark:border-gray-700"),e(H,"class","my-2 mb-5"),e(d,"id","modelfiles-import-input"),e(d,"type","file"),e(d,"accept",".json"),d.hidden=!0,e(x,"class","flex text-xs items-center space-x-1 px-3 py-1.5 rounded-xl bg-gray-50 hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700 dark:text-gray-200 transition"),e(l,"class","flex text-xs items-center space-x-1 px-3 py-1.5 rounded-xl bg-gray-50 hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700 dark:text-gray-200 transition"),e(M,"class","flex space-x-1"),e(h,"class","flex justify-end w-full mb-3"),e(E,"class","my-16"),e(r,"class","max-w-2xl mx-auto w-full px-3 md:px-0 my-10"),e(g,"class","flex flex-col justify-between w-full overflow-y-auto"),e(f,"class","min-h-screen max-h-[100dvh] w-full flex justify-center dark:text-white")},m(c,R){se(c,a,R),se(c,f,R),t(f,g),t(g,r),t(r,v),t(r,u),t(r,b),t(r,y),t(r,D),t(r,N),t(r,H);for(let w=0;w<k.length;w+=1)k[w]&&k[w].m(H,null);t(r,L),t(r,h),t(h,M),t(M,d),s[11](d),t(M,U),t(M,x),t(M,W),t(M,l),t(h,O),I&&I.m(h,null),t(r,A),t(r,E),Q||(Z=[G(d,"change",s[12]),G(d,"change",s[13]),G(x,"click",s[14]),G(l,"click",s[15])],Q=!0)},p(c,[R]){if(R&8&&i!==(i=`
		Modelfiles | ${c[3]}
	`)&&(document.title=i),R&112){q=we(c[4]);let w;for(w=0;w<q.length;w+=1){const X=xe(c,q,w);k[w]?k[w].p(X,R):(k[w]=ke(X),k[w].c(),k[w].m(H,null))}for(;w<k.length;w+=1)k[w].d(1);k.length=q.length}c[0].length>0?I?I.p(c,R):(I=be(c),I.c(),I.m(h,null)):I&&(I.d(1),I=null)},i:ue,o:ue,d(c){c&&(m(a),m(f)),Ie(k,c),s[11](null),I&&I.d(),Q=!1,ie(Z)}}}function je(s,i,a){let f,g;he(s,Ve,l=>a(3,f=l)),he(s,ee,l=>a(4,g=l));const{saveAs:r}=Ee;let v=[],_,u;const b=async l=>{let p=null;return p=await Se(localStorage.token,l).catch(O=>(oe.error(O),null)),p&&oe.success(`Deleted ${l}`),p},j=async l=>{await b(l),await De(localStorage.token,l),await ee.set(await le(localStorage.token))},y=async l=>{oe.success("Redirecting you to OpenWebUI Community");const p="https://openwebui.com",O=await window.open(`${p}/modelfiles/create`,"_blank");window.addEventListener("message",A=>{A.origin===p&&A.data==="loaded"&&O.postMessage(JSON.stringify(l),"*")},!1)},D=async l=>{let p=new Blob([JSON.stringify(l)],{type:"application/json"});r(p,`modelfiles-export-${Date.now()}.json`)};Te(()=>{a(0,v=JSON.parse(localStorage.getItem("modelfiles")??"[]")),v&&console.log(v)});const N=l=>{sessionStorage.modelfile=JSON.stringify(l),Ne("/modelfiles/create")},H=l=>{y(l)},L=l=>{j(l.tagName)};function h(l){Ce[l?"unshift":"push"](()=>{u=l,a(2,u)})}function M(){_=this.files,a(1,_)}return[v,_,u,f,g,j,y,D,N,H,L,h,M,()=>{console.log(_);let l=new FileReader;l.onload=async p=>{let O=JSON.parse(p.target.result);console.log(O);for(const A of O)await _e(localStorage.token,A).catch(E=>null);await ee.set(await le(localStorage.token))},l.readAsText(_[0])},()=>{u.click()},async()=>{D(g)},async()=>{for(const l of v)await _e(localStorage.token,l).catch(p=>null);D(v),localStorage.removeItem("modelfiles"),a(0,v=JSON.parse(localStorage.getItem("modelfiles")??"[]")),await ee.set(await le(localStorage.token))},async()=>{D(v),localStorage.removeItem("modelfiles"),a(0,v=JSON.parse(localStorage.getItem("modelfiles")??"[]")),await ee.set(await le(localStorage.token))}]}class Fe extends He{constructor(i){super(),Le(this,i,je,Be,ye,{})}}export{Fe as component};
